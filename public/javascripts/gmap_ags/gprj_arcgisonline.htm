<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Google Maps Adapter to ArcGIS Server Map Cache</title>
    <!-- replace your key -->

    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAiOIdlCs11aj2JsFS38tclBQfKfnu-mh0q_bJgSL96pCW-X8IuhTkUHKzIl8dkf8AaWQ2-R0nXzUiSg"
        type="text/javascript"></script>
    <script type="text/javascript" src="gmap_ags.js"></script>
    <style type="text/css">html, body {     margin: 0px;     height: 100%;}     </style>

    <script type="text/javascript">
   
    function initialize() {
      if (GBrowserIsCompatible()) {
        var map= new GMap2(document.getElementById("map_canvas"));
        new GKeyboardHandler(map);
        map.setCenter(new GLatLng(40,-95), 4);
        map.addControl(new GMapTypeControl());
        map.addControl(new GLargeMapControl  ()); 
        map.addControl(new GScaleControl());
        map.enableDoubleClickZoom();
        map.enableContinuousZoom();
        map.enableScrollWheelZoom();
   
       // remove default maps
        map.getMapTypes().length=0;
        
        // create a real projection
	    var prj=new GCS();
        // create a GProjection to convert pixel/latlng
        var params={
	        zoomOffset:2,
            originX:-180,
            originY:90,
	        projection:prj,
            resolutions:[
             0.3515625,
             0.17578125, 
             0.087890625,
		     0.0439453125, 
		     0.02197265625, 
		     0.010986328125, 
		     0.0054931640625, 
		     0.00274658203125, 
		     0.001373291015625, 
		     6.866455078125E-04, 
		     3.4332275390625E-04, 
		     1.71661376953125E-04, 
		     8.58306884765625E-05, 
		     4.29153442382813E-05, 
		     2.1457672119140686E-05 ]};
	    var gprj=new GMapCacheProjection(params);
 	
 	    var aocopy=new GCopyrightCollection('Data ');//©
        aocopy.addCopyright(new GCopyright(1, new GLatLngBounds(new GLatLng(-90,-180), new GLatLng(90,180)), 1, 'Copyright(c) 2007 ESRI, AND, TANA'));
        var agsLayer= new GTileLayer(aocopy, params.zoomOffset, (params.zoomOffset+params.resolutions.length-1));
        agsLayer.getTileUrl = function(tile,zoom){
            var u='http://services.arcgisonline.com/cache_bm/ESRI_StreetMap_World_2D/Layers/_allLayers/L'+('00'+(zoom-params.zoomOffset).toString(10)).substring(('00'+(zoom-params.zoomOffset).toString(10)).length-2)+'/R'+('00000000'+tile.y.toString(16)).substring(('00000000'+tile.y.toString(16)).length-8)+'/C'+('00000000'+tile.x.toString(16)).substring(('00000000'+tile.x.toString(16)).length-8)+'.jpg';
           // GLog.write(u);
            return u;
       }
        // create a MapType		
       var agsMap = new GMapType([agsLayer],gprj,"Street Map", {tileSize: 512});
       map.addMapType(agsMap);
       map.setMapType(agsMap);
      }
    }

    </script>

</head>
<body onload="initialize()" onunload="GUnload();">
      <div><span style="color:Red">For Code demonstration only.</span> Show ArcGIS Online (v9.2 only, 9.3 tile schema may change) Map Cache with Google Maps API.  </div>
                <div id="map_canvas" style="width: 100%; height: 90%">
                </div>
           
</body>
</html>
